<!DOCTYPE html>
<html lang="pt-BR" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ğŸ—ï¸ PrincÃ­pios de Arquitetura - ERP Anduril | Anduril Docs</title>
    <meta name="description" content="DocumentaÃ§Ã£o do Sistema ERP Anduril">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/anduril-docs/assets/style.BcAdTF1b.css" as="style">
    <link rel="preload stylesheet" href="/anduril-docs/vp-icons.css" as="style">
    
    <script type="module" src="/anduril-docs/assets/app.BSdJfVFS.js"></script>
    <link rel="preload" href="/anduril-docs/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/anduril-docs/assets/chunks/framework.Dl-aaRiw.js">
    <link rel="modulepreload" href="/anduril-docs/assets/chunks/theme.DVxYmmIe.js">
    <link rel="modulepreload" href="/anduril-docs/assets/chunks/katex.CBSAILhF.js">
    <link rel="modulepreload" href="/anduril-docs/assets/chunks/dagre-6UL2VRFP.C3lfKK_X.js">
    <link rel="modulepreload" href="/anduril-docs/assets/chunks/cose-bilkent-S5V4N54A.CTlEp7wj.js">
    <link rel="modulepreload" href="/anduril-docs/assets/chunks/c4Diagram-YG6GDRKO.BCs4CKhG.js">
    <link rel="modulepreload" href="/anduril-docs/assets/chunks/flowDiagram-NV44I4VS.BdSg_2J1.js">
    <link rel="modulepreload" href="/anduril-docs/assets/chunks/erDiagram-Q2GNP2WA.B887Mci4.js">
    <link rel="modulepreload" href="/anduril-docs/assets/chunks/gitGraphDiagram-NY62KEGX.CDhPMYVv.js">
    <link rel="modulepreload" href="/anduril-docs/assets/chunks/ganttDiagram-JELNMOA3.sJFVo59D.js">
    <link rel="modulepreload" href="/anduril-docs/assets/chunks/infoDiagram-WHAUD3N6.ZVOYUITp.js">
    <link rel="modulepreload" href="/anduril-docs/assets/chunks/pieDiagram-ADFJNKIX.FM8_6d4W.js">
    <link rel="modulepreload" href="/anduril-docs/assets/chunks/quadrantDiagram-AYHSOK5B.AIluUol8.js">
    <link rel="modulepreload" href="/anduril-docs/assets/chunks/xychartDiagram-PRI3JC2R.DFZOYsDr.js">
    <link rel="modulepreload" href="/anduril-docs/assets/chunks/requirementDiagram-UZGBJVZJ.C7xQhfU2.js">
    <link rel="modulepreload" href="/anduril-docs/assets/chunks/sequenceDiagram-WL72ISMW.BVerTTeC.js">
    <link rel="modulepreload" href="/anduril-docs/assets/chunks/classDiagram-2ON5EDUG.CRt6aYcD.js">
    <link rel="modulepreload" href="/anduril-docs/assets/chunks/classDiagram-v2-WZHVMYZB.CRt6aYcD.js">
    <link rel="modulepreload" href="/anduril-docs/assets/chunks/stateDiagram-FKZM4ZOC.B6MlP80V.js">
    <link rel="modulepreload" href="/anduril-docs/assets/chunks/stateDiagram-v2-4FDKWEC3.Dv2o8rtZ.js">
    <link rel="modulepreload" href="/anduril-docs/assets/chunks/journeyDiagram-XKPGCS4Q.Bgu1KMp6.js">
    <link rel="modulepreload" href="/anduril-docs/assets/chunks/timeline-definition-IT6M3QCI.tQ74_SaY.js">
    <link rel="modulepreload" href="/anduril-docs/assets/chunks/mindmap-definition-VGOIOE7T.FTsbxj92.js">
    <link rel="modulepreload" href="/anduril-docs/assets/chunks/kanban-definition-3W4ZIXB7.PBtvmSlH.js">
    <link rel="modulepreload" href="/anduril-docs/assets/chunks/sankeyDiagram-TZEHDZUN.BS5-JHAl.js">
    <link rel="modulepreload" href="/anduril-docs/assets/chunks/diagram-S2PKOQOG.CBeMIZ0J.js">
    <link rel="modulepreload" href="/anduril-docs/assets/chunks/diagram-QEK2KX5R.CU0yv8bt.js">
    <link rel="modulepreload" href="/anduril-docs/assets/chunks/blockDiagram-VD42YOAC.DcOxLx6w.js">
    <link rel="modulepreload" href="/anduril-docs/assets/chunks/architectureDiagram-VXUJARFQ.DGXf7WtA.js">
    <link rel="modulepreload" href="/anduril-docs/assets/chunks/diagram-PSM6KHXK.DfMs1t58.js">
    <link rel="modulepreload" href="/anduril-docs/assets/chunks/virtual_mermaid-config.DDnGl6nM.js">
    <link rel="modulepreload" href="/anduril-docs/assets/PRINCIPIOS_ARQUITETURA.md.kOYl0fq1.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0b0ada53></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0b0ada53>Skip to content</a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/anduril-docs/" data-v-1168a8e4><!--[--><!--]--><!--[--><img class="VPImage logo" src="ğŸ“š" alt data-v-8426fc1a><!--]--><span data-v-1168a8e4>Anduril</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/anduril-docs/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Home</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>DocumentaÃ§Ã£o</span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/anduril-docs/clientes/" data-v-35975db6><!--[--><span data-v-35975db6>ğŸ‘¥ Clientes</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/anduril-docs/contratos/" data-v-35975db6><!--[--><span data-v-35975db6>ğŸ“‹ Contratos</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/anduril-docs/terrenos/" data-v-35975db6><!--[--><span data-v-35975db6>ğŸ  Terrenos</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/anduril-docs/boletos/" data-v-35975db6><!--[--><span data-v-35975db6>ğŸ’³ Boletos</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/anduril-docs/cnab/" data-v-35975db6><!--[--><span data-v-35975db6>ğŸ¦ CNAB</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/anduril-docs/empresa/" data-v-35975db6><!--[--><span data-v-35975db6>ğŸ¢ Empresa</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/anduril-docs/exportacao/" data-v-35975db6><!--[--><span data-v-35975db6>ğŸ“Š ExportaÃ§Ã£o</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/anduril-docs/sistema/" data-v-35975db6><!--[--><span data-v-35975db6>âš™ï¸ Sistema</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/teecoleonard/anduril-docs" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/teecoleonard/anduril-docs" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav empty fixed" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-8a42e2b4><button data-v-8a42e2b4>Return to top</button><!----></div></div></div><!----><div class="VPContent" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>On this page</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _anduril-docs_PRINCIPIOS_ARQUITETURA" data-v-39a288b8><div><h1 id="ğŸ—ï¸-principios-de-arquitetura-erp-anduril" tabindex="-1">ğŸ—ï¸ PrincÃ­pios de Arquitetura - ERP Anduril <a class="header-anchor" href="#ğŸ—ï¸-principios-de-arquitetura-erp-anduril" aria-label="Permalink to &quot;ğŸ—ï¸ PrincÃ­pios de Arquitetura - ERP Anduril&quot;">â€‹</a></h1><p><strong>Status:</strong> DocumentaÃ§Ã£o de Arquitetura<br><strong>Ãšltima atualizaÃ§Ã£o:</strong> 8 de Fevereiro de 2026</p><hr><h2 id="ğŸ¯-principios-fundamentais" tabindex="-1">ğŸ¯ PrincÃ­pios Fundamentais <a class="header-anchor" href="#ğŸ¯-principios-fundamentais" aria-label="Permalink to &quot;ğŸ¯ PrincÃ­pios Fundamentais&quot;">â€‹</a></h2><h3 id="_1-sincronizacao-automatica" tabindex="-1">1. <strong>SincronizaÃ§Ã£o AutomÃ¡tica</strong> <a class="header-anchor" href="#_1-sincronizacao-automatica" aria-label="Permalink to &quot;1. **SincronizaÃ§Ã£o AutomÃ¡tica**&quot;">â€‹</a></h3><p>O sistema sempre mantÃ©m dados sincronizados automaticamente:</p><div class="mermaid"></div><p><strong>ImplementaÃ§Ã£o:</strong></p><ul><li>Eventos no banco de dados atualizam derivados</li><li>TransaÃ§Ãµes atÃ´micas garantem consistÃªncia</li><li>ValidaÃ§Ãµes em tempo real</li><li>Sem operaÃ§Ãµes manuais necessÃ¡rias</li></ul><hr><h3 id="_2-imutabilidade-de-transacoes" tabindex="-1">2. <strong>Imutabilidade de TransaÃ§Ãµes</strong> <a class="header-anchor" href="#_2-imutabilidade-de-transacoes" aria-label="Permalink to &quot;2. **Imutabilidade de TransaÃ§Ãµes**&quot;">â€‹</a></h3><p>Uma vez que uma transaÃ§Ã£o Ã© registrada (como um boleto), ela NUNCA muda:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Boleto criado em 01/01/2026 por R$ 3.333,33</span></span>
<span class="line"><span>    â†“ (NUNCA MUDA, MESMO COM REAJUSTE)</span></span>
<span class="line"><span>Mesmo que reajuste em 02/02/2026</span></span>
<span class="line"><span>    â†“</span></span>
<span class="line"><span>Boleto CONTINUA R$ 3.333,33</span></span></code></pre></div><p><strong>BenefÃ­cios:</strong></p><ul><li>âœ… Auditoria clara</li><li>âœ… HistÃ³rico confiÃ¡vel</li><li>âœ… CÃ¡lculos determinÃ­sticos</li><li>âœ… Rastreabilidade completa</li></ul><p><strong>Exemplo visual:</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Contrato: CONT-001</span></span>
<span class="line"><span>â”œâ”€ Boleto #1 (Jan/2026): R$ 3.333,33 â† IMUTÃVEL</span></span>
<span class="line"><span>â”œâ”€ Boleto #2 (Fev/2026): R$ 3.333,33 â† IMUTÃVEL</span></span>
<span class="line"><span>â”œâ”€ Boleto #3 (Mar/2026): R$ 3.333,33 â† IMUTÃVEL</span></span>
<span class="line"><span>â”‚</span></span>
<span class="line"><span>â””â”€ [REAJUSTE APLICADO: +10%]</span></span>
<span class="line"><span>   â”œâ”€ Boleto #4 (Abr/2026): R$ 3.666,66 â† Nova parcela</span></span>
<span class="line"><span>   â”œâ”€ Boleto #5 (Mai/2026): R$ 3.666,66 â† Nova parcela</span></span>
<span class="line"><span>   â””â”€ Boleto #6 (Jun/2026): R$ 3.666,66 â† Nova parcela</span></span></code></pre></div><hr><h3 id="_3-dados-derivados-vs-armazenados" tabindex="-1">3. <strong>Dados Derivados vs Armazenados</strong> <a class="header-anchor" href="#_3-dados-derivados-vs-armazenados" aria-label="Permalink to &quot;3. **Dados Derivados vs Armazenados**&quot;">â€‹</a></h3><p>Distingue entre dados que sÃ£o <strong>calculados</strong> vs dados que sÃ£o <strong>armazenados</strong>:</p><div class="mermaid"></div><p><strong>Dados Armazenados (no BD):</strong></p><ul><li><code>valor_parcela</code> - Valor base do contrato/boleto</li><li><code>indice_de_reajuste</code> - % de reajuste anual</li><li><code>data_ultimo_reajuste</code> - Quando foi reajustado</li><li><code>data_vencimento</code> - Data prevista de pagamento</li></ul><p><strong>Dados Derivados (calculados):</strong></p><ul><li><code>saldo_devedor</code> = SUM(boletos onde status = &#39;aberto&#39;)</li><li><code>quantidade_restante</code> = COUNT(boletos onde status = &#39;aberto&#39;)</li><li><code>dias_em_atraso</code> = TODAY() - data_vencimento</li><li><code>valor_total</code> = valor_parcela Ã— quantidade_parcelas</li></ul><hr><h2 id="ğŸ”„-fluxos-principais" tabindex="-1">ğŸ”„ Fluxos Principais <a class="header-anchor" href="#ğŸ”„-fluxos-principais" aria-label="Permalink to &quot;ğŸ”„ Fluxos Principais&quot;">â€‹</a></h2><h3 id="fluxo-criar-contrato" tabindex="-1">Fluxo: Criar Contrato <a class="header-anchor" href="#fluxo-criar-contrato" aria-label="Permalink to &quot;Fluxo: Criar Contrato&quot;">â€‹</a></h3><div class="mermaid"></div><p><strong>Dados de entrada:</strong></p><ul><li><code>numero_contrato</code> (Ãºnico)</li><li><code>valor_parcela</code></li><li><code>quantidade_parcelas</code></li><li><code>data_primeira_parcela</code></li><li><code>cliente_id</code></li></ul><hr><h3 id="fluxo-reajustar-contrato" tabindex="-1">Fluxo: Reajustar Contrato <a class="header-anchor" href="#fluxo-reajustar-contrato" aria-label="Permalink to &quot;Fluxo: Reajustar Contrato&quot;">â€‹</a></h3><div class="mermaid"></div><p><strong>O que muda:</strong></p><ul><li><code>valor_parcela</code> aumenta</li><li><code>data_ultimo_reajuste</code> atualizada</li><li>Novos boletos usam novo valor</li><li>Boletos existentes nÃ£o mudam</li></ul><p><strong>O que NÃƒO muda:</strong></p><ul><li>Boletos jÃ¡ emitidos</li><li>Boletos jÃ¡ pagos</li><li>HistÃ³rico de transaÃ§Ãµes</li></ul><hr><h3 id="fluxo-importar-retorno-cnab" tabindex="-1">Fluxo: Importar Retorno CNAB <a class="header-anchor" href="#fluxo-importar-retorno-cnab" aria-label="Permalink to &quot;Fluxo: Importar Retorno CNAB&quot;">â€‹</a></h3><div class="mermaid"></div><p><strong>Dados atualizados:</strong></p><ul><li><code>status</code> do boleto (ligado â†’ pago)</li><li><code>data_pagamento</code></li><li><code>valor_pago</code></li><li><code>saldo_devedor</code> recalculado automaticamente</li></ul><hr><h2 id="ğŸ“Š-estrutura-de-dados" tabindex="-1">ğŸ“Š Estrutura de Dados <a class="header-anchor" href="#ğŸ“Š-estrutura-de-dados" aria-label="Permalink to &quot;ğŸ“Š Estrutura de Dados&quot;">â€‹</a></h2><h3 id="tabela-contratos" tabindex="-1">Tabela: Contratos <a class="header-anchor" href="#tabela-contratos" aria-label="Permalink to &quot;Tabela: Contratos&quot;">â€‹</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>contrato</span></span>
<span class="line"><span>â”œâ”€ id (PK)</span></span>
<span class="line"><span>â”œâ”€ numero_contrato (UNIQUE)</span></span>
<span class="line"><span>â”œâ”€ valor_parcela (DECIMAL) â† MUDA com reajuste</span></span>
<span class="line"><span>â”œâ”€ indice_de_reajuste (DECIMAL) â† % anual</span></span>
<span class="line"><span>â”œâ”€ data_ultimo_reajuste (DATE)</span></span>
<span class="line"><span>â”œâ”€ quantidade_parcelas (INT) â† Original</span></span>
<span class="line"><span>â”œâ”€ saldo_devedor (DECIMAL) â† DERIVADO</span></span>
<span class="line"><span>â”œâ”€ cliente_id (FK)</span></span>
<span class="line"><span>â””â”€ timestamps</span></span></code></pre></div><h3 id="tabela-boletos" tabindex="-1">Tabela: Boletos <a class="header-anchor" href="#tabela-boletos" aria-label="Permalink to &quot;Tabela: Boletos&quot;">â€‹</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>boleto</span></span>
<span class="line"><span>â”œâ”€ id (PK)</span></span>
<span class="line"><span>â”œâ”€ contrato_id (FK)</span></span>
<span class="line"><span>â”œâ”€ valor_parcela (DECIMAL) â† IMUTÃVEL</span></span>
<span class="line"><span>â”œâ”€ status (ENUM: aberto/pago/vencido)</span></span>
<span class="line"><span>â”œâ”€ data_vencimento (DATE)</span></span>
<span class="line"><span>â”œâ”€ data_pagamento (DATE ou NULL)</span></span>
<span class="line"><span>â”œâ”€ valor_pago (DECIMAL)</span></span>
<span class="line"><span>â””â”€ timestamps</span></span></code></pre></div><hr><h2 id="âœ¨-caracteristicas-principais" tabindex="-1">âœ¨ CaracterÃ­sticas Principais <a class="header-anchor" href="#âœ¨-caracteristicas-principais" aria-label="Permalink to &quot;âœ¨ CaracterÃ­sticas Principais&quot;">â€‹</a></h2><h3 id="sincronizacao-automatica" tabindex="-1">SincronizaÃ§Ã£o AutomÃ¡tica <a class="header-anchor" href="#sincronizacao-automatica" aria-label="Permalink to &quot;SincronizaÃ§Ã£o AutomÃ¡tica&quot;">â€‹</a></h3><p>Toda mudanÃ§a no boleto (via CNAB ou manual) atualiza a contagem de saldo:</p><div class="mermaid"></div><h3 id="validacoes-em-cascata" tabindex="-1">ValidaÃ§Ãµes em Cascata <a class="header-anchor" href="#validacoes-em-cascata" aria-label="Permalink to &quot;ValidaÃ§Ãµes em Cascata&quot;">â€‹</a></h3><p>Cada operaÃ§Ã£o passa por validaÃ§Ãµes:</p><ol><li><strong>ValidaÃ§Ã£o de Entrada</strong> - Dados corretos?</li><li><strong>ValidaÃ§Ã£o de NegÃ³cio</strong> - Regras atendidas?</li><li><strong>ValidaÃ§Ã£o de Estado</strong> - Sistema pode fazer isso agora?</li><li><strong>ValidaÃ§Ã£o Transacional</strong> - Todas as mudanÃ§as consistentes?</li></ol><hr><h2 id="ğŸ”’-seguranca-de-dados" tabindex="-1">ğŸ”’ SeguranÃ§a de Dados <a class="header-anchor" href="#ğŸ”’-seguranca-de-dados" aria-label="Permalink to &quot;ğŸ”’ SeguranÃ§a de Dados&quot;">â€‹</a></h2><h3 id="principios-de-seguranca" tabindex="-1">PrincÃ­pios de SeguranÃ§a <a class="header-anchor" href="#principios-de-seguranca" aria-label="Permalink to &quot;PrincÃ­pios de SeguranÃ§a&quot;">â€‹</a></h3><ul><li>âœ… TransaÃ§Ãµes atÃ´micas (tudo ou nada)</li><li>âœ… Sem deleÃ§Ã£o de histÃ³rico (soft delete)</li><li>âœ… Auditoria completa de mudanÃ§as</li><li>âœ… ValidaÃ§Ã£o dupla (BD + API)</li><li>âœ… Isolamento de dados por tenant</li></ul><h3 id="exemplo-seguranca-em-reajuste" tabindex="-1">Exemplo: SeguranÃ§a em Reajuste <a class="header-anchor" href="#exemplo-seguranca-em-reajuste" aria-label="Permalink to &quot;Exemplo: SeguranÃ§a em Reajuste&quot;">â€‹</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>1. API recebe pedido de reajuste</span></span>
<span class="line"><span>2. Valida se contrato existe</span></span>
<span class="line"><span>3. Calcula novo valor_parcela</span></span>
<span class="line"><span>4. Abre transaÃ§Ã£o no BD</span></span>
<span class="line"><span>5. Atualiza valor_parcela</span></span>
<span class="line"><span>6. Atualiza data_ultimo_reajuste</span></span>
<span class="line"><span>7. Gera novo boleto (com novo valor)</span></span>
<span class="line"><span>8. Recalcula saldo_devedor</span></span>
<span class="line"><span>9. Confirma transaÃ§Ã£o</span></span>
<span class="line"><span>10. Se erro em qualquer passo â†’ tudo reverte</span></span></code></pre></div><hr><h2 id="ğŸ“ˆ-padrao-de-design" tabindex="-1">ğŸ“ˆ PadrÃ£o de Design <a class="header-anchor" href="#ğŸ“ˆ-padrao-de-design" aria-label="Permalink to &quot;ğŸ“ˆ PadrÃ£o de Design&quot;">â€‹</a></h2><h3 id="repository-pattern" tabindex="-1">Repository Pattern <a class="header-anchor" href="#repository-pattern" aria-label="Permalink to &quot;Repository Pattern&quot;">â€‹</a></h3><p>Acesso a dados centralizado:</p><div class="mermaid"></div><h3 id="service-pattern" tabindex="-1">Service Pattern <a class="header-anchor" href="#service-pattern" aria-label="Permalink to &quot;Service Pattern&quot;">â€‹</a></h3><p>LÃ³gica de negÃ³cio isolada:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ContratoService</span></span>
<span class="line"><span>â”œâ”€ criar(dados)</span></span>
<span class="line"><span>â”œâ”€ reajustar(id, percentual)</span></span>
<span class="line"><span>â”œâ”€ sincronizarSaldo(id)</span></span>
<span class="line"><span>â”œâ”€ listar()</span></span>
<span class="line"><span>â””â”€ obter(id)</span></span></code></pre></div><hr><h2 id="ğŸ¯-resumo-dos-principios" tabindex="-1">ğŸ¯ Resumo dos PrincÃ­pios <a class="header-anchor" href="#ğŸ¯-resumo-dos-principios" aria-label="Permalink to &quot;ğŸ¯ Resumo dos PrincÃ­pios&quot;">â€‹</a></h2><table tabindex="0"><thead><tr><th>PrincÃ­pio</th><th>BenefÃ­cio</th></tr></thead><tbody><tr><td>SincronizaÃ§Ã£o AutomÃ¡tica</td><td>Sempre consistente</td></tr><tr><td>Imutabilidade de TransaÃ§Ãµes</td><td>Auditoria clara</td></tr><tr><td>Dados Derivados</td><td>Sem cÃ¡lculos incorretos</td></tr><tr><td>TransaÃ§Ãµes AtÃ´micas</td><td>Tudo ou nada</td></tr><tr><td>ValidaÃ§Ã£o em Cascata</td><td>MÃ¡xima seguranÃ§a</td></tr></tbody></table><hr><p><em>Ãšltima atualizaÃ§Ã£o: 8 de Fevereiro de 2026</em></p></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><!----><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter" data-v-5d98c3a5 data-v-e315a0ad><div class="container" data-v-e315a0ad><p class="message" data-v-e315a0ad>DocumentaÃ§Ã£o do Sistema ERP Anduril</p><p class="copyright" data-v-e315a0ad>Copyright Â© 2026</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"analise_conversa_completa.md\":\"B0FUSRxl\",\"analises-implementacao_index.md\":\"pgYvg8MA\",\"analises-implementacao_readme.md\":\"DYKyn28G\",\"atualizacao_documentacao_concluida.md\":\"qYdssvuJ\",\"boletos_como-gerar-boleto-contrato.md\":\"CryrxKQb\",\"boletos_index.md\":\"DmQvoIHr\",\"boletos_status-boletos.md\":\"_WKmAHjE\",\"clientes_como-registrar-cliente.md\":\"DgzNol2T\",\"clientes_index.md\":\"t4PZm8yx\",\"cnab_como-gerar-remessa.md\":\"DROmmY3T\",\"cnab_como-importar-retorno.md\":\"ojwBHrIQ\",\"cnab_index.md\":\"DDHWopSS\",\"cnab_status-remessas.md\":\"B7ZlJDxd\",\"consolidacao_mudancas.md\":\"CDsbPVP1\",\"contratos_como-gerar-contrato.md\":\"DnA93gi1\",\"contratos_index.md\":\"WnU1Pvhi\",\"contratos_reajustes_arquitetura.md\":\"Dl11ysQs\",\"contratos_reajustes_index.md\":\"BroM-0t9\",\"contratos_reajustes_longo-prazo.md\":\"nnOT9Eyn\",\"contratos_status-contratos.md\":\"DCqABTj1\",\"desenvolvimento_build_fix_summary.md\":\"S4pVnbbM\",\"desenvolvimento_diagnostico_problema_node_producao.md\":\"CnbKabl2\",\"desenvolvimento_fase_3_refactoring_completo.md\":\"DIgM39A0\",\"desenvolvimento_fases-desenvolvimento.md\":\"Csurct_J\",\"desenvolvimento_index.md\":\"D-oRH22o\",\"empresa_como-cadastrar-empresa.md\":\"WGBLNSVa\",\"empresa_index.md\":\"rsoX3dSE\",\"exportacao_index.md\":\"y6KN2lYo\",\"index.md\":\"JerQEppG\",\"leia-me-primeiro.md\":\"BmocLxmG\",\"migracao_concluida.md\":\"3tlyvzpS\",\"principios_arquitetura.md\":\"kOYl0fq1\",\"referencia_rapida.md\":\"CTDwbp9v\",\"sistema_index.md\":\"DeT4fb9L\",\"terrenos_como-registrar-terreno.md\":\"BPWGFh_1\",\"terrenos_index.md\":\"BInzG-MB\",\"terrenos_status-terrenos.md\":\"CNr7kTTE\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"pt-BR\",\"dir\":\"ltr\",\"title\":\"Anduril Docs\",\"description\":\"DocumentaÃ§Ã£o do Sistema ERP Anduril\",\"base\":\"/anduril-docs/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"ğŸ“š\",\"siteTitle\":\"Anduril\",\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"DocumentaÃ§Ã£o\",\"items\":[{\"text\":\"ğŸ‘¥ Clientes\",\"link\":\"/clientes/\"},{\"text\":\"ğŸ“‹ Contratos\",\"link\":\"/contratos/\"},{\"text\":\"ğŸ  Terrenos\",\"link\":\"/terrenos/\"},{\"text\":\"ğŸ’³ Boletos\",\"link\":\"/boletos/\"},{\"text\":\"ğŸ¦ CNAB\",\"link\":\"/cnab/\"},{\"text\":\"ğŸ¢ Empresa\",\"link\":\"/empresa/\"},{\"text\":\"ğŸ“Š ExportaÃ§Ã£o\",\"link\":\"/exportacao/\"},{\"text\":\"âš™ï¸ Sistema\",\"link\":\"/sistema/\"}]}],\"sidebar\":{\"/clientes/\":[{\"text\":\"Clientes\",\"items\":[{\"text\":\"VisÃ£o Geral\",\"link\":\"/clientes/\"},{\"text\":\"Como Registrar Cliente\",\"link\":\"/clientes/como-registrar-cliente\"}]}],\"/contratos/\":[{\"text\":\"Contratos\",\"items\":[{\"text\":\"VisÃ£o Geral\",\"link\":\"/contratos/\"},{\"text\":\"Como Gerar Contrato\",\"link\":\"/contratos/como-gerar-contrato\"},{\"text\":\"Status de Contratos\",\"link\":\"/contratos/status-contratos\"}]},{\"text\":\"Reajustes\",\"collapsed\":false,\"items\":[{\"text\":\"VisÃ£o Geral\",\"link\":\"/contratos/reajustes/\"},{\"text\":\"Arquitetura\",\"link\":\"/contratos/reajustes/arquitetura\"},{\"text\":\"Planejamento Longo Prazo\",\"link\":\"/contratos/reajustes/longo-prazo\"}]}],\"/terrenos/\":[{\"text\":\"Terrenos\",\"items\":[{\"text\":\"VisÃ£o Geral\",\"link\":\"/terrenos/\"},{\"text\":\"Como Registrar Terreno\",\"link\":\"/terrenos/como-registrar-terreno\"},{\"text\":\"Status de Terrenos\",\"link\":\"/terrenos/status-terrenos\"}]}],\"/boletos/\":[{\"text\":\"Boletos\",\"items\":[{\"text\":\"VisÃ£o Geral\",\"link\":\"/boletos/\"},{\"text\":\"Como Gerar Boleto\",\"link\":\"/boletos/como-gerar-boleto-contrato\"},{\"text\":\"Status de Boletos\",\"link\":\"/boletos/status-boletos\"}]}],\"/cnab/\":[{\"text\":\"CNAB\",\"items\":[{\"text\":\"VisÃ£o Geral\",\"link\":\"/cnab/\"},{\"text\":\"Status de Remessas\",\"link\":\"/cnab/status-remessas\"},{\"text\":\"Como Gerar Remessa\",\"link\":\"/cnab/como-gerar-remessa\"},{\"text\":\"Como Importar Retorno\",\"link\":\"/cnab/como-importar-retorno\"}]}],\"/empresa/\":[{\"text\":\"Empresa\",\"items\":[{\"text\":\"VisÃ£o Geral\",\"link\":\"/empresa/\"},{\"text\":\"Como Cadastrar Empresa\",\"link\":\"/empresa/como-cadastrar-empresa\"}]}],\"/exportacao/\":[{\"text\":\"ExportaÃ§Ã£o\",\"items\":[{\"text\":\"VisÃ£o Geral\",\"link\":\"/exportacao/\"}]}],\"/sistema/\":[{\"text\":\"Sistema\",\"items\":[{\"text\":\"VisÃ£o Geral\",\"link\":\"/sistema/\"},{\"text\":\"Sistema de Backup\",\"link\":\"/sistema/SISTEMA_BACKUP\"}]}]},\"footer\":{\"message\":\"DocumentaÃ§Ã£o do Sistema ERP Anduril\",\"copyright\":\"Copyright Â© 2026\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/teecoleonard/anduril-docs\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>